<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body style="-webkit-app-region: drag">
    <div id="lmain">
      <div id="lmain_left">
        <div id="l_top">Local Sites</div>
        <div id="l_middle">
            <div id="l_sites"></div>
        </div>
        <div id="l_footer">footer</div>


      </div>
      <div id="lmain_right">
        Right
        <>
        <span id="cpu">-</span>
        <span id="pwd">-</span>
      </div>
    </div>
    
    <script>
      const {ipcRenderer} = require('electron');

      async function runCommand(cmd) {
        const res = await ipcRenderer.sendSync('runCommand', cmd);
        return res;
      }


      // Async message handler
      ipcRenderer.on('asynchronous-reply', (event, arg) => {
            console.log(arg);
         });

         ipcRenderer.on('cpu', (event, arg) => {
            console.log(arg);
            document.getElementById('cpu').innerHTML = arg.toFixed(2);
  
         });
      ipcRenderer.on('get_sites_list', (event, arg) => {
            console.log(arg);
            document.getElementById('l_sites').innerHTML = arg;
            let aValetLinks = arg.split("\n");
            aValetLinks.forEach((element) => {
              console.log(element);
             });

         });
         /*Start the Main Window - inform main process that we are ready to get a list of sites*/
         ipcRenderer.send('main-start', 'Game start');

  </script>
   </body>
</html>
